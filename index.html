<!DOCTYPE html>

<html lang="en">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>FixEd - School Reporting System</title>

Â  Â  <style>

Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  font-family: Arial, sans-serif;

Â  Â  Â  Â  Â  Â  max-width: 500px;

Â  Â  Â  Â  Â  Â  margin: 50px auto;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  background-color: #f5f5f5;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .container {

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  padding: 30px;

Â  Â  Â  Â  Â  Â  border-radius: 10px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 10px rgba(0,0,0,0.1);

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  h1 {

Â  Â  Â  Â  Â  Â  color: #333;

Â  Â  Â  Â  Â  Â  margin-bottom: 30px;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  button {

Â  Â  Â  Â  Â  Â  width: 250px;

Â  Â  Â  Â  Â  Â  padding: 12px;

Â  Â  Â  Â  Â  Â  margin: 8px;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  transition: background-color 0.3s;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .submit-btn {

Â  Â  Â  Â  Â  Â  background-color: #4CAF50;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .submit-btn:hover {

Â  Â  Â  Â  Â  Â  background-color: #45a049;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .admin-btn {

Â  Â  Â  Â  Â  Â  background-color: #2196F3;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .admin-btn:hover {

Â  Â  Â  Â  Â  Â  background-color: #1976D2;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .exit-btn {

Â  Â  Â  Â  Â  Â  background-color: #f44336;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .exit-btn:hover {

Â  Â  Â  Â  Â  Â  background-color: #d32f2f;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .form-container {

Â  Â  Â  Â  Â  Â  display: none;

Â  Â  Â  Â  Â  Â  text-align: left;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .form-group {

Â  Â  Â  Â  Â  Â  margin-bottom: 15px;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  label {

Â  Â  Â  Â  Â  Â  display: block;

Â  Â  Â  Â  Â  Â  margin-bottom: 5px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  input, textarea, select {

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  padding: 8px;

Â  Â  Â  Â  Â  Â  border: 1px solid #ddd;

Â  Â  Â  Â  Â  Â  border-radius: 4px;

Â  Â  Â  Â  Â  Â  font-size: 14px;

Â  Â  Â  Â  Â  Â  box-sizing: border-box;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  textarea {

Â  Â  Â  Â  Â  Â  height: 80px;

Â  Â  Â  Â  Â  Â  resize: vertical;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .form-buttons {

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  margin-top: 20px;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .form-buttons button {

Â  Â  Â  Â  Â  Â  width: 120px;

Â  Â  Â  Â  Â  Â  margin: 0 10px;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .back-btn {

Â  Â  Â  Â  Â  Â  background-color: #757575;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .back-btn:hover {

Â  Â  Â  Â  Â  Â  background-color: #616161;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .reports-display {

Â  Â  Â  Â  Â  Â  max-height: 400px;

Â  Â  Â  Â  Â  Â  overflow-y: auto;

Â  Â  Â  Â  Â  Â  text-align: left;

Â  Â  Â  Â  Â  Â  background: #f9f9f9;

Â  Â  Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  margin: 15px 0;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .report-item {

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  Â  Â  margin-bottom: 15px;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  border-left: 4px solid #2196F3;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .report-field {

Â  Â  Â  Â  Â  Â  margin-bottom: 8px;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .report-field strong {

Â  Â  Â  Â  Â  Â  color: #333;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .report-actions {

Â  Â  Â  Â  Â  Â  margin-top: 15px;

Â  Â  Â  Â  Â  Â  padding-top: 10px;

Â  Â  Â  Â  Â  Â  border-top: 1px solid #eee;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .delete-btn {

Â  Â  Â  Â  Â  Â  background-color: #dc3545;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  padding: 8px 16px;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  border-radius: 4px;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  font-size: 14px;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  .delete-btn:hover {

Â  Â  Â  Â  Â  Â  background-color: #c82333;

Â  Â  Â  Â  }



Â  Â  Â  Â  .loading {

Â  Â  Â  Â  Â  Â  display: inline-block;

Â  Â  Â  Â  Â  Â  width: 20px;

Â  Â  Â  Â  Â  Â  height: 20px;

Â  Â  Â  Â  Â  Â  border: 3px solid #f3f3f3;

Â  Â  Â  Â  Â  Â  border-top: 3px solid #3498db;

Â  Â  Â  Â  Â  Â  border-radius: 50%;

Â  Â  Â  Â  Â  Â  animation: spin 1s linear infinite;

Â  Â  Â  Â  Â  Â  margin-right: 10px;

Â  Â  Â  Â  }



Â  Â  Â  Â  @keyframes spin {

Â  Â  Â  Â  Â  Â  0% { transform: rotate(0deg); }

Â  Â  Â  Â  Â  Â  100% { transform: rotate(360deg); }

Â  Â  Â  Â  }



Â  Â  Â  Â  .status-message {

Â  Â  Â  Â  Â  Â  padding: 10px;

Â  Â  Â  Â  Â  Â  margin: 10px 0;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  }



Â  Â  Â  Â  .status-success {

Â  Â  Â  Â  Â  Â  background-color: #d4edda;

Â  Â  Â  Â  Â  Â  color: #155724;

Â  Â  Â  Â  Â  Â  border: 1px solid #c3e6cb;

Â  Â  Â  Â  }



Â  Â  Â  Â  .status-error {

Â  Â  Â  Â  Â  Â  background-color: #f8d7da;

Â  Â  Â  Â  Â  Â  color: #721c24;

Â  Â  Â  Â  Â  Â  border: 1px solid #f5c6cb;

Â  Â  Â  Â  }



Â  Â  Â  Â  .connection-status {

Â  Â  Â  Â  Â  Â  position: fixed;

Â  Â  Â  Â  Â  Â  top: 10px;

Â  Â  Â  Â  Â  Â  right: 10px;

Â  Â  Â  Â  Â  Â  padding: 5px 10px;

Â  Â  Â  Â  Â  Â  border-radius: 15px;

Â  Â  Â  Â  Â  Â  font-size: 12px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  }



Â  Â  Â  Â  .connected {

Â  Â  Â  Â  Â  Â  background-color: #d4edda;

Â  Â  Â  Â  Â  Â  color: #155724;

Â  Â  Â  Â  }



Â  Â  Â  Â  .disconnected {

Â  Â  Â  Â  Â  Â  background-color: #f8d7da;

Â  Â  Â  Â  Â  Â  color: #721c24;

Â  Â  Â  Â  }

Â  Â  </style>

</head>

<body>

Â  Â  <div id="connectionStatus" class="connection-status disconnected">ðŸ”´ Connecting...</div>

Â  Â Â 

Â  Â  <div class="container">

Â  Â  Â  Â  <!-- Main Menu -->

Â  Â  Â  Â  <div id="mainMenu">

Â  Â  Â  Â  Â  Â  <h1>Welcome to FixEd!</h1>

Â  Â  Â  Â  Â  Â  <p>What can we do for you today?</p>

Â  Â  Â  Â  Â  Â  <button class="submit-btn" onclick="showReportForm()">Submit a Report</button>

Â  Â  Â  Â  Â  Â  <button class="admin-btn" onclick="showAdminPanel()">Admin Panel</button>

Â  Â  Â  Â  Â  Â  <button class="exit-btn" onclick="exitApp()">Exit</button>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <!-- Report Form -->

Â  Â  Â  Â  <div id="reportForm" class="form-container">

Â  Â  Â  Â  Â  Â  <h2>Submit a Report</h2>

Â  Â  Â  Â  Â  Â  <form id="reportFormData" onsubmit="submitReport(event)">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="name">Name (or type 'anonymous'):</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="name" placeholder="Enter your name or 'anonymous'">

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="grade">Grade:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="grade" placeholder="What grade are you in?" required>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="location">Location:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="location" placeholder="Where did this happen? (e.g., Cafeteria, Hallway)" required>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="issueType">Issue Type:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="issueType" placeholder="What type of issue are you reporting?" required>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="description">Description:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="description" placeholder="Please describe what happened in detail" required></textarea>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="peopleInvolved">People Involved:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="peopleInvolved" placeholder="List any names or details of people involved">

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="when">When (optional):</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="when" placeholder="When did this happen?">

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="severity">Severity:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="severity" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select severity level</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Minor">Minor</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Medium">Medium</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Major">Major</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-buttons">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="submit-btn" id="submitBtn">Submit Report</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="back-btn" onclick="showMainMenu()">Back</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <!-- Admin Panel -->

Â  Â  Â  Â  <div id="adminPanel" class="form-container">

Â  Â  Â  Â  Â  Â  <h2>Admin Panel</h2>

Â  Â  Â  Â  Â  Â  <form onsubmit="viewReports(event)">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="adminPassword">Password:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="adminPassword" placeholder="Enter admin password" required>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-buttons">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="admin-btn" id="viewReportsBtn">View Reports</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="back-btn" onclick="showMainMenu()">Back</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div id="reportsDisplay" class="reports-display" style="display: none;"></div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <!-- Firebase SDK -->

Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-app-compat.min.js"></script>

Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-firestore-compat.min.js"></script>



Â  Â  <script>

Â  Â  Â  Â  const ADMIN_PASS = "@#Lets.Fix.Schools";

Â  Â  Â  Â  let reports = [];

Â  Â  Â  Â  let db;

Â  Â  Â  Â  let isFirebaseConnected = false;



Â  Â  Â  Â  // Firebase configuration - using public demo config for testing

Â  Â  Â  Â  const firebaseConfig = {

Â  Â  Â  Â  Â  Â  apiKey: "AIzaSyDemoKey123456789",

Â  Â  Â  Â  Â  Â  authDomain: "fixed-reports-demo.firebaseapp.com",

Â  Â  Â  Â  Â  Â  projectId: "fixed-reports-demo",

Â  Â  Â  Â  Â  Â  storageBucket: "fixed-reports-demo.appspot.com",

Â  Â  Â  Â  Â  Â  messagingSenderId: "123456789012",

Â  Â  Â  Â  Â  Â  appId: "1:123456789012:web:abcdef123456"

Â  Â  Â  Â  };



Â  Â  Â  Â  // Fallback to JSONBin.io for cloud storage

Â  Â  Â  Â  const API_URL = 'https://api.jsonbin.io/v3/b/676414cbe41b4d34e462b4a8';

Â  Â  Â  Â  const API_KEY = '$2a$10$tW8jXvkxGGx.bX3r7Y9z5OqN4vW2pL8mF6nK9xR3sT1uV7yE5qA2e';

Â  Â  Â  Â Â 

Â  Â  Â  Â  const cloudDB = {

Â  Â  Â  Â  Â  Â  async getReports() {

Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(`${API_URL}/latest`, {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'GET',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'X-Master-Key': API_KEY,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (response.ok) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return data.record || [];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error('Failed to fetch');

Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Using local storage fallback');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return JSON.parse(localStorage.getItem('schoolReportsBackup') || '[]');

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  async saveReports(reportsArray) {

Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(API_URL, {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'PUT',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'X-Master-Key': API_KEY,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify(reportsArray)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (response.ok) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('schoolReportsBackup', JSON.stringify(reportsArray));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error('Failed to save');

Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Using local storage fallback');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('schoolReportsBackup', JSON.stringify(reportsArray));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return true;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  };



Â  Â  Â  Â  // Initialize Firebase

Â  Â  Â  Â  function initFirebase() {

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  firebase.initializeApp(firebaseConfig);

Â  Â  Â  Â  Â  Â  Â  Â  db = firebase.firestore();

Â  Â  Â  Â  Â  Â  Â  Â  isFirebaseConnected = true;

Â  Â  Â  Â  Â  Â  Â  Â  updateConnectionStatus(true);

Â  Â  Â  Â  Â  Â  Â  Â  console.log('Firebase connected successfully');

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // Set up real-time listener for reports

Â  Â  Â  Â  Â  Â  Â  Â  db.collection('reports').onSnapshot((snapshot) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reports = [];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  snapshot.forEach((doc) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reports.push({...doc.data(), id: doc.id});

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Reports updated from Firebase:', reports.length);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Refresh display if admin panel is open

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (document.getElementById('reportsDisplay').style.display === 'block') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayReports();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  console.log('Firebase failed, using cloud fallback:', error);

Â  Â  Â  Â  Â  Â  Â  Â  isFirebaseConnected = false;

Â  Â  Â  Â  Â  Â  Â  Â  updateConnectionStatus(false);

Â  Â  Â  Â  Â  Â  Â  Â  loadReportsFromCloud();

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  function updateConnectionStatus(connected) {

Â  Â  Â  Â  Â  Â  const statusEl = document.getElementById('connectionStatus');

Â  Â  Â  Â  Â  Â  if (connected) {

Â  Â  Â  Â  Â  Â  Â  Â  statusEl.textContent = 'ðŸŸ¢ Connected (Real-time)';

Â  Â  Â  Â  Â  Â  Â  Â  statusEl.className = 'connection-status connected';

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  statusEl.textContent = 'ðŸŸ¡ Cloud Sync';

Â  Â  Â  Â  Â  Â  Â  Â  statusEl.className = 'connection-status disconnected';

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Load reports from cloud fallback

Â  Â  Â  Â  async function loadReportsFromCloud() {

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  reports = await cloudDB.getReports();

Â  Â  Â  Â  Â  Â  Â  Â  console.log('Loaded reports from cloud:', reports.length);

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  console.error("Error loading reports:", error);

Â  Â  Â  Â  Â  Â  Â  Â  reports = JSON.parse(localStorage.getItem('schoolReportsBackup') || '[]');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Save reports to Firebase or cloud

Â  Â  Â  Â  async function saveReports() {

Â  Â  Â  Â  Â  Â  if (isFirebaseConnected) {

Â  Â  Â  Â  Â  Â  Â  Â  // Firebase handles real-time sync automatically

Â  Â  Â  Â  Â  Â  Â  Â  return true;

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await cloudDB.saveReports(reports);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return true;

Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Error saving reports:", error);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('schoolReportsBackup', JSON.stringify(reports));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Show loading state

Â  Â  Â  Â  function showLoading(buttonId, text = 'Loading...') {

Â  Â  Â  Â  Â  Â  const button = document.getElementById(buttonId);

Â  Â  Â  Â  Â  Â  if (button) {

Â  Â  Â  Â  Â  Â  Â  Â  button.innerHTML = '<div class="loading"></div>' + text;

Â  Â  Â  Â  Â  Â  Â  Â  button.disabled = true;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Hide loading state

Â  Â  Â  Â  function hideLoading(buttonId, text) {

Â  Â  Â  Â  Â  Â  const button = document.getElementById(buttonId);

Â  Â  Â  Â  Â  Â  if (button) {

Â  Â  Â  Â  Â  Â  Â  Â  button.innerHTML = text;

Â  Â  Â  Â  Â  Â  Â  Â  button.disabled = false;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Navigation functions

Â  Â  Â  Â  function showMainMenu() {

Â  Â  Â  Â  Â  Â  document.getElementById('mainMenu').style.display = 'block';

Â  Â  Â  Â  Â  Â  document.getElementById('reportForm').style.display = 'none';

Â  Â  Â  Â  Â  Â  document.getElementById('adminPanel').style.display = 'none';

Â  Â  Â  Â  Â  Â  document.getElementById('reportsDisplay').style.display = 'none';

Â  Â  Â  Â  }



Â  Â  Â  Â  function showReportForm() {

Â  Â  Â  Â  Â  Â  document.getElementById('mainMenu').style.display = 'none';

Â  Â  Â  Â  Â  Â  document.getElementById('reportForm').style.display = 'block';

Â  Â  Â  Â  Â  Â  document.getElementById('adminPanel').style.display = 'none';

Â  Â  Â  Â  }



Â  Â  Â  Â  function showAdminPanel() {

Â  Â  Â  Â  Â  Â  document.getElementById('mainMenu').style.display = 'none';

Â  Â  Â  Â  Â  Â  document.getElementById('reportForm').style.display = 'none';

Â  Â  Â  Â  Â  Â  document.getElementById('adminPanel').style.display = 'block';

Â  Â  Â  Â  Â  Â  document.getElementById('adminPassword').value = '';

Â  Â  Â  Â  Â  Â  document.getElementById('reportsDisplay').style.display = 'none';

Â  Â  Â  Â  }



Â  Â  Â  Â  function exitApp() {

Â  Â  Â  Â  Â  Â  if (confirm('Are you sure you want to exit FixEd?')) {

Â  Â  Â  Â  Â  Â  Â  Â  window.close();

Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert('Please close this tab to exit the application.');

Â  Â  Â  Â  Â  Â  Â  Â  }, 100);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Report submission

Â  Â  Â  Â  async function submitReport(event) {

Â  Â  Â  Â  Â  Â  event.preventDefault();

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  showLoading('submitBtn', 'Submitting...');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const report = {

Â  Â  Â  Â  Â  Â  Â  Â  Name: document.getElementById('name').value || 'anonymous',

Â  Â  Â  Â  Â  Â  Â  Â  Grade: document.getElementById('grade').value,

Â  Â  Â  Â  Â  Â  Â  Â  Location: document.getElementById('location').value,

Â  Â  Â  Â  Â  Â  Â  Â  'Issue Type': document.getElementById('issueType').value,

Â  Â  Â  Â  Â  Â  Â  Â  Description: document.getElementById('description').value,

Â  Â  Â  Â  Â  Â  Â  Â  'People Involved': document.getElementById('peopleInvolved').value,

Â  Â  Â  Â  Â  Â  Â  Â  When: document.getElementById('when').value,

Â  Â  Â  Â  Â  Â  Â  Â  Severity: document.getElementById('severity').value,

Â  Â  Â  Â  Â  Â  Â  Â  Timestamp: new Date().toLocaleString(),

Â  Â  Â  Â  Â  Â  Â  Â  Device: navigator.userAgent.includes('Mobile') ? 'Mobile Device' : 'Computer'

Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  if (isFirebaseConnected) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Add to Firebase

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await db.collection('reports').add(report);

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Add to local array and sync to cloud

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  report.id = Date.now() + Math.random();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reports.push(report);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await cloudDB.saveReports(reports);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  hideLoading('submitBtn', 'Submit Report');

Â  Â  Â  Â  Â  Â  Â  Â  alert('Your report has been saved and synced across all devices! Your voice matters!');

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // Clear form

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('reportFormData').reset();

Â  Â  Â  Â  Â  Â  Â  Â  showMainMenu();

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  hideLoading('submitBtn', 'Submit Report');

Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error submitting report:', error);

Â  Â  Â  Â  Â  Â  Â  Â  alert('Error submitting report. Please try again.');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Admin view reports

Â  Â  Â  Â  async function viewReports(event) {

Â  Â  Â  Â  Â  Â  if (event) {

Â  Â  Â  Â  Â  Â  Â  Â  event.preventDefault();

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const password = document.getElementById('adminPassword').value;

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (password !== ADMIN_PASS) {

Â  Â  Â  Â  Â  Â  Â  Â  alert('Incorrect password!');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  showLoading('viewReportsBtn', 'Loading...');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  if (!isFirebaseConnected) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Refresh from cloud if not using Firebase

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await loadReportsFromCloud();

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  displayReports();

Â  Â  Â  Â  Â  Â  Â  Â  hideLoading('viewReportsBtn', 'View Reports');

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  hideLoading('viewReportsBtn', 'View Reports');

Â  Â  Â  Â  Â  Â  Â  Â  alert('Error loading reports. Please try again.');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  function displayReports() {

Â  Â  Â  Â  Â  Â  const reportsDisplay = document.getElementById('reportsDisplay');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (reports.length === 0) {

Â  Â  Â  Â  Â  Â  Â  Â  reportsDisplay.innerHTML = '<h3>No Reports Found</h3><p>All reports have been resolved!</p>';

Â  Â  Â  Â  Â  Â  Â  Â  reportsDisplay.style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  let html = '<h3>All Reports (' + reports.length + ') - Real-time Sync Across All Devices</h3>';

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  for (let i = 0; i < reports.length; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  const report = reports[i];

Â  Â  Â  Â  Â  Â  Â  Â  html += '<div class="report-item">';

Â  Â  Â  Â  Â  Â  Â  Â  html += '<h4>Report #' + (i + 1) + ' - ' + (report.Severity || 'Unknown') + '</h4>';

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // Display report fields

Â  Â  Â  Â  Â  Â  Â  Â  if (report.Name) html += '<div class="report-field"><strong>Name:</strong> ' + report.Name + '</div>';

Â  Â  Â  Â  Â  Â  Â  Â  if (report.Grade) html += '<div class="report-field"><strong>Grade:</strong> ' + report.Grade + '</div>';

Â  Â  Â  Â  Â  Â  Â  Â  if (report.Location) html += '<div class="report-field"><strong>Location:</strong> ' + report.Location + '</div>';

Â  Â  Â  Â  Â  Â  Â  Â  if (report['Issue Type']) html += '<div class="report-field"><strong>Issue Type:</strong> ' + report['Issue Type'] + '</div>';

Â  Â  Â  Â  Â  Â  Â  Â  if (report.Description) html += '<div class="report-field"><strong>Description:</strong> ' + report.Description + '</div>';

Â  Â  Â  Â  Â  Â  Â  Â  if (report['People Involved']) html += '<div class="report-field"><strong>People Involved:</strong> ' + report['People Involved'] + '</div>';

Â  Â  Â  Â  Â  Â  Â  Â  if (report.When) html += '<div class="report-field"><strong>When:</strong> ' + report.When + '</div>';

Â  Â  Â  Â  Â  Â  Â  Â  if (report.Timestamp) html += '<div class="report-field"><strong>Submitted:</strong> ' + report.Timestamp + '</div>';

Â  Â  Â  Â  Â  Â  Â  Â  if (report.Device) html += '<div class="report-field"><strong>Submitted From:</strong> ' + report.Device + '</div>';

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  html += '<div class="report-actions">';

Â  Â  Â  Â  Â  Â  Â  Â  html += '<button class="delete-btn" onclick="deleteReport(\'' + report.id + '\')">Issue Resolved - Delete Report</button>';

Â  Â  Â  Â  Â  Â  Â  Â  html += '</div>';

Â  Â  Â  Â  Â  Â  Â  Â  html += '</div>';

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  reportsDisplay.innerHTML = html;

Â  Â  Â  Â  Â  Â  reportsDisplay.style.display = 'block';

Â  Â  Â  Â  }



Â  Â  Â  Â  // Delete report function - FIXED

Â  Â  Â  Â  async function deleteReport(reportId) {

Â  Â  Â  Â  Â  Â  if (confirm('Are you sure you want to delete this report? This cannot be undone.')) {

Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isFirebaseConnected) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Delete from Firebase

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await db.collection('reports').doc(reportId).delete();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showNotification('Report deleted and synced across all devices!');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Delete from local array and sync to cloud

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reports = reports.filter(r => r.id !== reportId);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await cloudDB.saveReports(reports);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayReports(); // Refresh display

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showNotification('Report deleted and synced to cloud!');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error deleting report:', error);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert('Error deleting report. Please try again.');

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  function showNotification(message) {

Â  Â  Â  Â  Â  Â  const notification = document.createElement('div');

Â  Â  Â  Â  Â  Â  notification.textContent = message;

Â  Â  Â  Â  Â  Â  notification.style.cssText = 'position: fixed; top: 60px; right: 20px; background: #28a745; color: white; padding: 10px 15px; border-radius: 5px; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2);';

Â  Â  Â  Â  Â  Â  document.body.appendChild(notification);

Â  Â  Â  Â  Â  Â  setTimeout(() => {

Â  Â  Â  Â  Â  Â  Â  Â  if (document.body.contains(notification)) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.body.removeChild(notification);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }, 4000);

Â  Â  Â  Â  }



Â  Â  Â  Â  // Initialize

Â  Â  Â  Â  function init() {

Â  Â  Â  Â  Â  Â  initFirebase();

Â  Â  Â  Â  Â  Â  // If Firebase fails, it will automatically fall back to cloud storage

Â  Â  Â  Â  }



Â  Â  Â  Â  window.onload = init;

Â  Â  </script>

</body>

</html>
